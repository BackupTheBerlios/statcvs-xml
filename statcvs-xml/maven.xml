<project 
  xmlns:j="jelly:core"
  xmlns:u="jelly:util"
  xmlns:ant="jelly:ant"
  xmlns:m="maven"
  default="java:jar">


	<preGoal name="java:compile">
	    <ant:filter token="VERSION" value="${pom.currentVersion}"/>
   	    <ant:filter token="JAR" value="${maven.final.name}.jar"/>
		<copy toDir="target/src" filtering="true" overwrite="true">
			<fileset dir="${pom.build.sourceDirectory}">
				<includes name="**/*"/>
			</fileset>
		</copy>
	    <path id="maven.compile.src.set" location="target/src"/>
  	</preGoal>
  	
  	<postGoal name="uberjar">
		<ant:move file="${maven.build.dir}/${maven.final.name}-uber.jar" toFile="${maven.build.dir}/${maven.final.name}.jar" overwrite="true"/>
  	</postGoal>

</project>
